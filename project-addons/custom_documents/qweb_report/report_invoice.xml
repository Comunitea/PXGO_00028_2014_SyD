<?xml version="1.0" encoding="utf-8"?>
<odoo>

        <template id="report_invoice_document_custom" inherit_id="account.report_invoice_document">
            <xpath expr="//div[@t-if='o.name']" position="before">
                <div class="col-xs-2" t-if="o.partner_id.commercial_partner_id.supplier_ref">
                    <strong>Ref. proveedor:</strong>
                    <p t-field="o.partner_id.commercial_partner_id.supplier_ref"/>
                </div>
            </xpath>
            <xpath expr="//div[@t-if='o.partner_id.ref']/p" position="replace">
                <p t-field="o.partner_id.commercial_partner_id.ref"/>
            </xpath>
            <xpath expr="//div[@name='reference']" position="after">
                <div class="col-xs-2" t-if="o.ship_id">
                    <strong>Ship:</strong>
                    <p t-field="o.ship_id.name"/>
                </div>
            </xpath>
            <xpath expr="//th[last()-1]" position="replace"/>
            <xpath expr="//span[contains(@t-esc, 'l.invoice_line_tax_ids')]/.." position="replace"/>
            <xpath expr="//p[@t-if='o.comment']" position="before">
                <p>
                    <span >No se admiten devoluciones pasados 15 d√≠as</span>
                </p>
            </xpath>
            <xpath expr="//tr[@t-foreach='range(max(5-len(o.invoice_line_ids),0))']/td[last()-1]" position="replace"/>
        </template>

        <template id="report_invoice_layouted_custom" inherit_id="sale.report_invoice_layouted">
            <xpath expr="//t[@name='lines_layouted']//th[last()-1]" position="replace"/>
            <xpath expr="//t[@name='lines_layouted']//span[contains(@t-esc, 'l.invoice_line_tax_ids')]/.." position="replace"/>
        </template>

        <template id="report_invoice_document_net_price" inherit_id="sale.report_invoice_layouted" primary="True">
            <xpath expr="//table[@name='invoice_line_table']//th[@t-if='display_discount']" position="replace"/>
            <xpath expr="//table[@name='invoice_line_table']//td[@t-if='display_discount']" position="replace"/>
            <xpath expr="//table[@name='invoice_line_table']//span[@t-field='l.price_unit']" position="attributes">
                <attribute name="t-field">l.price_unit_net</attribute>
            </xpath>
            <xpath expr="//t[@name='lines_layouted']//th[@t-if='display_discount']" position="replace"/>
            <xpath expr="//t[@name='lines_layouted']//td[@t-if='display_discount']" position="replace"/>
            <xpath expr="//t[@name='lines_layouted']//span[@t-field='l.price_unit']" position="attributes">
                <attribute name="t-field">l.price_unit_net</attribute>
            </xpath>
        </template>

        <template id="report_net_invoice">
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="o">
                    <t t-call="custom_documents.report_invoice_document_net_price" t-lang="o.partner_id.lang"/>
                </t>
            </t>
        </template>

</odoo>
